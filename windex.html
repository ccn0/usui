<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UserScript UI by CCN0</title>
    <style>
        body {
            margin:0;
            background-color: rgb(22, 31, 22);
        }
    </style>
    <script src="/usui/USUI.js"></script>
    <link rel="stylesheet" href="/usui/USUI.css">
</head>
<body>
    <noscript>this is a javascript library thing, you could probably guess why this is showing up</noscript>
    <script>
    openIFrame({url:"usui.html"});
    function openIFrame(params) {
        const oiContainer = USUI.createPopup({
            stay: false,
            id: "iframe",
            fencing: true,
            title: "UserScript UI",
            position: ["5%","5%"],
            buttons: [
                {
                    textContent: "X",
                    title: "Close",
                    event: () => {
                        alert("Should run USUI.closeMenu(popup);")
                    },
                },
            ],
        });
        oiContainer.style.height = "auto";
        oiContainer.style.width = "auto";
        oiContainer.style.cssText += " width: 90%;height:90%;"

        const errContent = document.createElement("div");
        errContent.classList.add("USUI_popupcontent");
        errContent.style.cssText =
            "padding: 0;display: flex;flex-direction: row; height: calc(100% - 25.5px);";
        errContent.style.cssText +=
            "min-width: 4px; min-height: 4px;max-width:100%;max-height:100%;";

        const iframe = document.createElement("iframe");
        iframe.style.cssText = "flex:1;border:none;width:100%;height:100%";

        if (params.html && !params.url) {
            const blob = new Blob([params.html], { type: "text/html" });
            const blobURL = URL.createObjectURL(blob);
            iframe.src = blobURL;
        } else {
            iframe.src = params.url;
        };
        errContent.appendChild(iframe);

        oiContainer.addEventListener("keydown", (e) => {
            if (e.key == "Escape") {
                e.preventDefault();
                USUI.closeMenu(oiContainer);
            }
            if (e.key == "Enter") {
                e.preventDefault();
                USUI.closeMenu(oiContainer);
            }
        });

        oiContainer.appendChild(errContent);
        document.body.appendChild(oiContainer);
    }
    </script>
</body>
</html>