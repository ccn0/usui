<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UserScript UI by CCN0</title>
    <link rel="icon" href="./logoicon.png">
    <link rel="canonical" href="https://usui.qog.app/">
    <meta name="theme-color" content="#666666" data-react-helmet="true">
    <meta name="og:title" content="UserScript UI">
    <meta property="og:url" content="https://usui.qog.app/index.html">
    <meta property="og:type" content="website">
    <meta name="creator" content="CCN0">
    <meta name="description" content="USUI is a lightweight JavaScript library/toolkit designed to make creating floating menus for Userscripts easier.">
    <meta property="og:description" content="USUI is a lightweight JavaScript library/toolkit designed to make creating floating menus for Userscripts easier.">
    <style>
        body {
            margin:0;
            background-color: #1a0c36;
        }

        @media (max-width: 500px) {
            #bbtest,#modeultest,#bbtemplate {
                max-width: 100%;
            }
        }

        iframe {
            user-select: none;
        }
    </style>
    <script src="./usui/USUI.js"></script>
    <link rel="stylesheet" href="./usui/USUI.css">
</head>
<body>
    <noscript>this is a javascript library toolkit thing, you could probably guess why this is showing up</noscript>
    <script>
    openIFrame({html:"<style>body {background:#000;color:#fff;}</style><p>USUI is a lightweight JavaScript toolkit designed to make creating menus or configs for Userscripts easier. You can create Popups, which are draggable and customizable windows, with many settings to change their behavior. USUI also comes with built-in modules to ease development of configuration menus, and have a standard look across browsers and mobile.</p>"});
    function openIFrame(params) {
        /* this code is most definitely INSECURE AND NOT FOR PRODUCTION, so I'd make my own if I were you... */
        const oiContainer = USUI.createPopup({
            stay: false,
            id: "iframe",
            layer: 399,
            fencing: true,
            title: "UserScript UI",
            position: ["5%","5%"],
            style: "height:auto;width:auto;height:90%;width:90%;",
            buttons: [
                {
                    text: "X",
                    title: "Close",
                    action: () => {
                        USUIalert("Should run <code>USUI.closeMenu(popup);</code>, but you <em>can</em> close this popup!", {usehtml: true, titletext: "Closeable"})
                    },
                },
                {
                    textContent: "Modules",
                    title: "View USUI's built-in input modules",
                    action: moduleTest
                },
                {
                    text: "Building Blocks",
                    title: "View USUI's built-in UI modules",
                    action: buildingblocks
                },
                {
                    text: "No Titlebar",
                    action: bbTemplate
                },
                {
                    text:"Dropdown",
                    dropdown:[
                        {
                            text:"Alert 1",
                            title:"Alerts 1 aint it",
                            action:()=>{
                                alert(1)
                            }
                        },
                        {
                            text:"Log 2+2",
                            title:"Logs 2+2 in console",
                            action:()=>{
                                console.log(2+2)
                            }
                        },
                        {
                            text:"I wont close the dropdown",
                            title:"Logs 2+2 in console",
                            keepOpen:true,
                            action:()=>{
                                console.log(2+2)
                            }
                        },
                    ]
                }
            ],
        });

        const errContent = USUI.createPopupContent({
            style:"padding: 0;display: flex;flex-direction: row;",
        });

        const iframe = document.createElement("iframe");
        iframe.style.cssText = "flex:1;border:none;width:100%;height:100%";

        if (params.html && !params.url) {
            iframe.srcdoc = params.html;
        } else {
            iframe.src = params.url;
        };
        errContent.appendChild(iframe);

        oiContainer.appendChild(errContent);
        document.body.appendChild(oiContainer);
    };
    
    function USUIalert(message = "",params = {
        titletext: "Alert",
        usehtml: false,
    }) {
        const alertContainer = USUI.createPopup({
            stay: false, 
            position: ["6%","6%"],
            id: "alertmenu",
            title: params.titletext,
            buttons: [
                {
                textContent: "X",
                title: "Close"+(params.titletext.length > 0 ? " "+params.titletext+" Window": ""),
                classes: ["closebtn"],
                event: () => {
                    USUI.closeMenu(alertContainer);}
                },
            ]
        });
        alertContainer.style.height = "auto";

        const alertContent = USUI.createPopupContent({
            style: "padding: 5px 15px;display: block;flex-direction: column;",
        });
        if (params.usehtml) {
            alertContent.innerHTML = message;
        } else {
            alertContent.textContent = message;
        };

        alertContainer.appendChild(alertContent);
        document.body.appendChild(alertContainer);

        alertContainer.querySelector("button").focus();
    };
    
    function moduleTest() {
        const alertContainer = USUI.createPopup({
            stay: false, 
            position: ["6%","6%"],
            id: "modeultest",
            title: "USUI Modules",
            theme: "USUI_popup_T_defaultdark",
            buttons: [
                {
                textContent: "X",
                title: "Close Modules Window",
                classes: ["closebtn"],
                event: () => {
                    USUI.closeMenu(alertContainer);}
                },
            ]
        });
        alertContainer.style.height = "auto";

        const alertContent = USUI.createPopupContent({
            style: "padding: 15px;display: block;flex-direction: column;",
        });

        const row1 = document.createElement("div");
        row1.style.marginBottom = "16px";

        row1.appendChild(document.createTextNode("USUI Color Input: "));

        const exampleRGB = USUI.modules.iRGB({
            red: 230, 
            green: 70,
            blue: 149
        });
        exampleRGB.addEventListener('input',(e)=>{
            console.log(e.target.dataset.value);
        });
        row1.appendChild(exampleRGB);

        alertContent.appendChild(row1);

        const row2 = document.createElement("div");

        row2.appendChild(document.createTextNode("Normal Color Input: "));

        const dumbRGB = document.createElement("input");
        dumbRGB.type = "color";
        dumbRGB.value = "#e64695";
        dumbRGB.addEventListener('input',(e)=>{
            console.log(e.target.value);
        });
        row2.appendChild(dumbRGB);

        alertContent.appendChild(row2);

        alertContainer.appendChild(alertContent);
        document.body.appendChild(alertContainer);

        alertContainer.querySelector("button").focus();
    };

    function buildingblocks() {
        const alertContainer = USUI.createPopup({
            stay: false, 
            position: ["6%","6%"],
            id: "bbtest",
            title: "USUI Building Blocks",
            style: "height:auto;max-height:50vh;",
            buttons: [
                {
                    text: "X",
                    title: "Close Building Blocks Window",
                    classes: ["closebtn"],
                    event: () => {
                        USUI.closeMenu(alertContainer);
                    }
                },
            ]
        });

        const alertContent = USUI.createPopupContent({
            style:"flex:1;flex-direction:column;padding: 16px;display: flex;overflow-y:auto;",
        });

        alertContent.appendChild(USUI.modules.BBtext({
            tag:"img",
            src:"logowordmark.png",
        }));
        alertContent.appendChild(USUI.modules.BBtext({
            text:"Building Blocks",
            tag:"h1",
        }));
        alertContent.appendChild(USUI.modules.BBtext({
            tag:"details",
            innerHTML:"<summary>I have keys but no doors. I have space but no room. You can enter but can't leave. What am I?</summary>A keyboard. This was taken straight from mdn"
        }));

        const li = document.createElement('li');
        li.textContent = 'Test item';
        alertContent.appendChild(USUI.modules.BBtext({
            tag:"ul",
            id:"exampleul",
            innerHTML: li,
        }));

        function makeInputTest(params = {
            type: "text"
        }) {
            const [exampleText,eginput] = USUI.modules.BBinput({
                id: "exampleInput"+params.type,
                type:params.type,
                labelAttributes: {
                    innerHTML: `<code>${params.type}</code> Input`
                }
            });
            if ("value" in params) eginput.value = params.value;
            eginput.addEventListener('change',(e)=>{
                console.log(e.target.value);
            });
            alertContent.appendChild(exampleText);
        };
        ["button","date","datetime-local","email","file","password","time","text","submit"].forEach((type)=>{
            makeInputTest({type: type});
        });

        const [exampleColor,egcolori] = USUI.modules.BBinput({
            id: "exampleBBCI",
            type: "color",
            label: "Color Input",
            red: 255,
            green: 85,
            blue: 150,
        });
        egcolori.addEventListener('change',(e)=>{
            console.log(e.target.dataset.value);
            alertContainer.querySelector("#bbexampleparagraph").style.backgroundColor = e.target.dataset.value;
        });
        alertContent.appendChild(exampleColor);

        const [exampleNColor,egncolori] = USUI.modules.BBinput({
            id: "exampleNBBCI",
            type: "color",
            label: "Native Color Input",
            value: "#ffaa00",
            forceNative: true,
        });
        egncolori.addEventListener('change',(e)=>{
            console.log(e.target.value);
            alertContainer.querySelector("#bbexampleparagraph").style.backgroundColor = e.target.value;
        });
        alertContent.appendChild(exampleNColor);

        const [exampleBox,egbox] = USUI.modules.BBinput({
            id: "exampleBox",
            type:"checkbox",
            label: "Checkbox/Toggle",
            checked: true,
        });
        egbox.addEventListener('change',(e)=>{
            console.log(e.target.checked);
        });
        alertContent.appendChild(exampleBox);

        const [exampleRange,egrange] = USUI.modules.BBinput({
            id: "exampleRange",
            type:"range",
            label: "Range/Slider",
            tickSet: true,
            value: 10,
            min:0,
            max:100,
            step:5,
            ticks: 5,
            tooltip: true,
        });
        egrange.addEventListener('change',(e)=>{
            console.log(e.target.value);
        });
        alertContent.appendChild(exampleRange);

        alertContent.appendChild(USUI.modules.BBtext({
            tag:"hr",
        }));

        alertContent.appendChild(USUI.modules.BBtext({
            tag:"p",
            id: "bbexampleparagraph",
            style:"margin:0 16px 16px;",
            innerHTML:"<a href='#'>Building Blocks</a> are a set of modules designed to make creating forms or configs easier. You can create button groups and input fields very easily with them. Range inputs (sliders, <code>&lt;input type=\"range\"&gt;</code>) have a way to automatically add tick marks to indicate minimums and maximums, as long as they are provided."
        }));

        alertContent.appendChild(USUI.modules.BBbuttons({
            buttons: [
                {
                    text:"Alert 1",
                    title: "Alerts 1",
                    action: ()=>{
                        alert(1);
                    },
                },
                {
                    text:"Log 2+2",
                    title: "Log in the Console 2+2",
                    action: ()=>{
                        console.log(2+2);
                    },
                },
                {
                    text:"Close this",
                    title: "Literally closes this popup",
                    action: ()=>{
                        USUI.closeMenu(alertContainer);
                    },
                },
            ]
        }));

        alertContent.appendChild(USUI.modules.BBbuttons({
            buttons: [
                {
                    text:"Cancel",
                    title: "Does nothing",
                    id:"cancelbtn",
                    action: ()=>{
                    },
                },
                {
                    text:"Submit",
                    title: "Does nothing, the sequel",
                    classes: ["truactionblah"],
                    action: ()=>{
                    },
                },
            ]
        }));

        alertContainer.appendChild(alertContent);
        document.body.appendChild(alertContainer);

        alertContainer.querySelector("button").focus();
    };

    function bbTemplate() {
        USUI.closeMenu("bbtemplate");
        const [headerRow, headerRowItems] = USUI.modules.BBrow({
            items: [
                {
                    collapse: true,
                    buttons: [
                        {
                            text:"close",
                            action: ()=>{
                                USUI.closeMenu(popupContainer);
                            }
                        }
                    ]
                },
                {
                    tag:"h2",
                    style:"text-align:left",
                    text:"Alert Text Example",
                },
                // {
                //     type:"text",
                //     text:"hi",
                //     buttons:[]
                // }
            ]
        });
        const header = headerRowItems[1];

        const popupContainer = USUI.createPopup({
            position: "center",
            id: "bbtemplate",
            style: "height:auto;",
            fencing:true,
            handle: header,
            dataset: {
                balls: true,
            },
            titlebar: false,
            extraDraggable: true,
            title: "Building Blocks Template",
            buttons: [
                {
                    textContent: "X",
                    title: "Close Window",
                    classes: ["closebtn"],
                    dataset: {
                        hello: "world",
                    },
                    event: () => {
                        USUI.closeMenu(popupContainer);
                    }
                },
            ]
        });

        const popupContent = USUI.createPopupContent({
            style: "display: block;flex-direction: column;",
        });

        popupContent.appendChild(headerRow);

        const [bigRow, bigRowItems] = USUI.modules.BBrow({
            style: "margin:15px;",
            items:[
                {
                    id: "exampleInput",
                    type:"text",
                    label: false,
                    value:"Hello world!",
                },
                {
                    buttons:[
                        {
                            text:"Alert",
                            title: "Alerts the page of the value of the text input",
                            action: ()=>{
                                alert(bigRow.querySelector("#exampleInput").value);
                            },
                        }
                    ]
                }
            ]
        });
        popupContent.appendChild(bigRow);
        console.log(bigRowItems);

        popupContainer.appendChild(popupContent);
        document.body.appendChild(popupContainer);

        popupContainer.querySelector("button").focus();
    };
    </script>
</body>
</html>